---
title: "BabbleMe, 2023"
image: /assets/portfolio/babble.JPG
---
BabbleOn is an interactive web installation allowing users to craft their own 'babble tapes'— digital audio designed to thwart audio surveillance. These tapes, blending indistinct human speech, effectively mask conversations by mimicking their acoustic qualities. Despite evolving multi-speaker identification technologies, BabbleOn provides a unique experience: participants record a few sentences, which are then mixed into a customized babble tape, infused with the distinct properties of their own voice. Participants can download these tapes, offering a personal tool against future audio surveillance.

<style>
  .video-container {
  width: 100%;
  margin: 0 auto; /* Center the video horizontally (optional) */
}

video {
width:100%;
}

</style>
<div class="video-container">
  <video controls="" autoplay="" name="media"><source src="../../../assets/portfolio/babble.mp4" type="video/mp4"></video>

</div>

---

<div id="babble-section" style="margin-top: 2rem; padding: 1.5rem; background: rgba(0,240,255,0.03); border: 1px solid rgba(0,240,255,0.2);">

<h2 style="text-align:center; margin-top:0;">Try It: Babble Tape Generator</h2>

<p style="text-align:center; color: #b8a8d8; font-size: 0.8rem;">
Record 1–2 sentences, and the browser will chop, layer, and remix your voice into a babble tape — overlapping copies of your own voice at random offsets, speeds, and volumes to simulate background chatter. Like a restaurant where everyone sounds like you.<br>
<span style="font-size:0.65rem; opacity:0.7;">Your audio is processed entirely in-browser. Nothing is uploaded or stored.</span>
</p>

<div style="text-align:center; margin: 1.5rem 0;">
  <button id="babble-record-btn" style="background:#000; border:2px solid #00f0ff; color:#00f0ff; font-family:'JetBrains Mono',monospace; font-size:0.8rem; letter-spacing:0.1em; text-transform:uppercase; padding:0.7rem 1.5rem; cursor:pointer; transition: all 0.2s;">[ Hold to Record ]</button>
</div>

<div id="babble-status" style="text-align:center; font-size:0.65rem; color:#b8a8d8; margin-bottom: 1rem;"></div>

<!-- Waveform visualization -->
<canvas id="babble-waveform" style="display:none; width:100%; height:80px; border:1px solid rgba(0,240,255,0.15); background:rgba(0,0,0,0.4); margin-bottom:1rem;"></canvas>

<!-- Controls -->
<div id="babble-controls" style="display:none;">
  <div style="display:flex; gap:1rem; flex-wrap:wrap; justify-content:center; align-items:center; margin-bottom:1rem;">
    <div>
      <label style="font-size:0.65rem; color:#00f0ff; text-transform:uppercase; letter-spacing:0.05em;">Voices</label><br>
      <input type="range" id="babble-layers" min="4" max="20" value="10" style="width:100px; accent-color:#ff10f0;">
      <span id="babble-layers-val" style="font-size:0.65rem; color:#b8a8d8;">10</span>
    </div>
    <div>
      <label style="font-size:0.65rem; color:#00f0ff; text-transform:uppercase; letter-spacing:0.05em;">Chaos</label><br>
      <input type="range" id="babble-chaos" min="1" max="10" value="5" style="width:100px; accent-color:#ff10f0;">
      <span id="babble-chaos-val" style="font-size:0.65rem; color:#b8a8d8;">5</span>
    </div>
  </div>
  <div style="text-align:center; display:flex; gap:0.75rem; justify-content:center; flex-wrap:wrap;">
    <button id="babble-generate-btn" style="background:#000; border:2px solid #ff10f0; color:#ff10f0; font-family:'JetBrains Mono',monospace; font-size:0.75rem; letter-spacing:0.1em; text-transform:uppercase; padding:0.5rem 1rem; cursor:pointer;">[ Generate Babble Tape ]</button>
    <button id="babble-play-btn" style="display:none; background:#000; border:2px solid #00f0ff; color:#00f0ff; font-family:'JetBrains Mono',monospace; font-size:0.75rem; letter-spacing:0.1em; text-transform:uppercase; padding:0.5rem 1rem; cursor:pointer;">[ Play ]</button>
    <button id="babble-stop-btn" style="display:none; background:#000; border:2px solid #b8a8d8; color:#b8a8d8; font-family:'JetBrains Mono',monospace; font-size:0.75rem; letter-spacing:0.1em; text-transform:uppercase; padding:0.5rem 1rem; cursor:pointer;">[ Stop ]</button>
    <button id="babble-download-btn" style="display:none; background:#000; border:2px solid #b010ff; color:#b010ff; font-family:'JetBrains Mono',monospace; font-size:0.75rem; letter-spacing:0.1em; text-transform:uppercase; padding:0.5rem 1rem; cursor:pointer;">[ Download ]</button>
  </div>
</div>

<!-- Processing log -->
<div id="babble-log" style="display:none; margin-top:1rem; font-family:'JetBrains Mono',monospace; font-size:0.6rem; color:#00f0ff; line-height:1.8; max-height:150px; overflow-y:auto; background:rgba(0,0,0,0.5); padding:0.75rem; border:1px solid rgba(0,240,255,0.15);"></div>

</div>

<script>
(function() {
  let audioCtx = null;
  let rawBuffer = null;
  let babbleBuffer = null;
  let mediaRecorder = null;
  let audioChunks = [];
  let currentSources = [];
  let isPlaying = false;

  const recordBtn = document.getElementById('babble-record-btn');
  const statusEl = document.getElementById('babble-status');
  const waveform = document.getElementById('babble-waveform');
  const controls = document.getElementById('babble-controls');
  const generateBtn = document.getElementById('babble-generate-btn');
  const playBtn = document.getElementById('babble-play-btn');
  const stopBtn = document.getElementById('babble-stop-btn');
  const downloadBtn = document.getElementById('babble-download-btn');
  const logEl = document.getElementById('babble-log');
  const layersSlider = document.getElementById('babble-layers');
  const chaosSlider = document.getElementById('babble-chaos');
  const layersVal = document.getElementById('babble-layers-val');
  const chaosVal = document.getElementById('babble-chaos-val');

  layersSlider.addEventListener('input', function() { layersVal.textContent = this.value; });
  chaosSlider.addEventListener('input', function() { chaosVal.textContent = this.value; });

  function log(msg, color) {
    logEl.style.display = 'block';
    var line = document.createElement('div');
    line.style.color = color || '#00f0ff';
    line.textContent = '> ' + msg;
    logEl.appendChild(line);
    logEl.scrollTop = logEl.scrollHeight;
  }

  function setStatus(msg) {
    statusEl.textContent = msg;
  }

  // Recording - hold to record
  let isRecording = false;

  function startRecording() {
    audioCtx = new (window.AudioContext || window.webkitAudioContext)();
    audioChunks = [];

    navigator.mediaDevices.getUserMedia({ audio: true }).then(function(stream) {
      mediaRecorder = new MediaRecorder(stream);
      mediaRecorder.ondataavailable = function(e) { audioChunks.push(e.data); };
      mediaRecorder.onstop = function() {
        stream.getTracks().forEach(function(t) { t.stop(); });
        var blob = new Blob(audioChunks, { type: 'audio/webm' });
        var reader = new FileReader();
        reader.onload = function() {
          audioCtx.decodeAudioData(reader.result).then(function(buffer) {
            rawBuffer = buffer;
            setStatus('> Recording captured: ' + buffer.duration.toFixed(1) + 's — Adjust settings and generate your babble tape.');
            controls.style.display = 'block';
            drawWaveform(buffer);
          });
        };
        reader.readAsArrayBuffer(blob);
      };
      mediaRecorder.start();
      isRecording = true;
      recordBtn.textContent = '[ Recording... Release to Stop ]';
      recordBtn.style.borderColor = '#ff10f0';
      recordBtn.style.color = '#ff10f0';
      recordBtn.style.boxShadow = '0 0 15px rgba(255,16,240,0.4)';
      setStatus('> RECORDING — Speak now...');
    }).catch(function(err) {
      setStatus('> ERROR: Microphone access denied.');
    });
  }

  function stopRecording() {
    if (mediaRecorder && isRecording) {
      mediaRecorder.stop();
      isRecording = false;
      recordBtn.textContent = '[ Hold to Record ]';
      recordBtn.style.borderColor = '#00f0ff';
      recordBtn.style.color = '#00f0ff';
      recordBtn.style.boxShadow = 'none';
    }
  }

  recordBtn.addEventListener('mousedown', startRecording);
  recordBtn.addEventListener('mouseup', stopRecording);
  recordBtn.addEventListener('mouseleave', function() { if (isRecording) stopRecording(); });
  recordBtn.addEventListener('touchstart', function(e) { e.preventDefault(); startRecording(); });
  recordBtn.addEventListener('touchend', function(e) { e.preventDefault(); stopRecording(); });

  function drawWaveform(buffer) {
    waveform.style.display = 'block';
    var ctx = waveform.getContext('2d');
    waveform.width = waveform.offsetWidth;
    waveform.height = 80;
    var data = buffer.getChannelData(0);
    var step = Math.floor(data.length / waveform.width);
    ctx.clearRect(0, 0, waveform.width, waveform.height);
    ctx.strokeStyle = '#00f0ff';
    ctx.lineWidth = 1;
    ctx.beginPath();
    for (var i = 0; i < waveform.width; i++) {
      var min = 1, max = -1;
      for (var j = 0; j < step; j++) {
        var val = data[i * step + j] || 0;
        if (val < min) min = val;
        if (val > max) max = val;
      }
      var y1 = (1 + min) * waveform.height / 2;
      var y2 = (1 + max) * waveform.height / 2;
      ctx.moveTo(i, y1);
      ctx.lineTo(i, y2);
    }
    ctx.stroke();
  }

  // Generate babble tape - overlay same voice at random offsets, speeds, volumes
  generateBtn.addEventListener('click', function() {
    if (!rawBuffer) return;

    logEl.innerHTML = '';
    var numLayers = parseInt(layersSlider.value);
    var chaos = parseInt(chaosSlider.value) / 10;

    log('GENERATING BABBLE TAPE', '#ff10f0');
    log('Source duration: ' + rawBuffer.duration.toFixed(2) + 's', '#b8a8d8');
    log('Layers: ' + numLayers + ' | Chaos: ' + (chaos * 100).toFixed(0) + '%', '#b8a8d8');
    log('', '#000');

    // Create an offline context for rendering
    // Output duration: loop the babble for ~15 seconds
    var outputDuration = Math.max(rawBuffer.duration * 3, 15);
    var sampleRate = rawBuffer.sampleRate;
    var offlineCtx = new OfflineAudioContext(2, sampleRate * outputDuration, sampleRate);

    log('Creating ' + numLayers + ' overlapping voice layers...', '#b8a8d8');

    for (var i = 0; i < numLayers; i++) {
      // Random parameters for each layer
      var startOffset = Math.random() * rawBuffer.duration * 0.8;
      var playbackRate = 0.85 + Math.random() * 0.3 * (1 + chaos * 0.5);
      var volume = 0.15 + Math.random() * 0.4;
      var pan = (Math.random() * 2 - 1) * chaos;
      var delayTime = Math.random() * outputDuration * 0.7;

      // Randomly reverse some layers for extra babble effect
      var reversed = Math.random() < chaos * 0.3;

      var source = offlineCtx.createBufferSource();

      if (reversed) {
        // Create reversed buffer
        var revBuf = offlineCtx.createBuffer(rawBuffer.numberOfChannels, rawBuffer.length, sampleRate);
        for (var ch = 0; ch < rawBuffer.numberOfChannels; ch++) {
          var inData = rawBuffer.getChannelData(ch);
          var outData = revBuf.getChannelData(ch);
          for (var s = 0; s < inData.length; s++) {
            outData[s] = inData[inData.length - 1 - s];
          }
        }
        source.buffer = revBuf;
      } else {
        source.buffer = rawBuffer;
      }

      source.playbackRate.value = playbackRate;
      source.loop = true;
      source.loopStart = startOffset;
      source.loopEnd = Math.min(startOffset + rawBuffer.duration * 0.5, rawBuffer.duration);

      // Gain for volume
      var gainNode = offlineCtx.createGain();
      gainNode.gain.value = volume;

      // Stereo panner for spatial positioning
      var panner = offlineCtx.createStereoPanner();
      panner.pan.value = Math.max(-1, Math.min(1, pan));

      source.connect(gainNode);
      gainNode.connect(panner);
      panner.connect(offlineCtx.destination);

      source.start(delayTime, startOffset);

      var side = pan < -0.3 ? 'L' : pan > 0.3 ? 'R' : 'C';
      log('  Voice ' + (i + 1) + ': rate=' + playbackRate.toFixed(2) + ' vol=' + (volume * 100).toFixed(0) + '% pan=' + side + (reversed ? ' [REV]' : ''), '#b8a8d8');
    }

    log('', '#000');
    log('Rendering babble tape (' + outputDuration.toFixed(1) + 's)...', '#b8a8d8');

    offlineCtx.startRendering().then(function(renderedBuffer) {
      babbleBuffer = renderedBuffer;
      log('BABBLE TAPE COMPLETE', '#00f0ff');
      log('Duration: ' + renderedBuffer.duration.toFixed(1) + 's | Channels: ' + renderedBuffer.numberOfChannels, '#b8a8d8');
      playBtn.style.display = 'inline-block';
      downloadBtn.style.display = 'inline-block';
      setStatus('> Babble tape ready. Play it or download your anti-surveillance audio.');
    });
  });

  // Playback
  playBtn.addEventListener('click', function() {
    if (!babbleBuffer || isPlaying) return;
    var source = audioCtx.createBufferSource();
    source.buffer = babbleBuffer;
    source.connect(audioCtx.destination);
    source.start();
    currentSources.push(source);
    isPlaying = true;
    playBtn.style.display = 'none';
    stopBtn.style.display = 'inline-block';
    source.onended = function() {
      isPlaying = false;
      playBtn.style.display = 'inline-block';
      stopBtn.style.display = 'none';
    };
  });

  stopBtn.addEventListener('click', function() {
    currentSources.forEach(function(s) { try { s.stop(); } catch(e) {} });
    currentSources = [];
    isPlaying = false;
    playBtn.style.display = 'inline-block';
    stopBtn.style.display = 'none';
  });

  // Download as WAV
  downloadBtn.addEventListener('click', function() {
    if (!babbleBuffer) return;
    var numCh = babbleBuffer.numberOfChannels;
    var length = babbleBuffer.length;
    var sampleRate = babbleBuffer.sampleRate;
    var buffer = new ArrayBuffer(44 + length * numCh * 2);
    var view = new DataView(buffer);

    function writeString(offset, str) {
      for (var i = 0; i < str.length; i++) view.setUint8(offset + i, str.charCodeAt(i));
    }

    writeString(0, 'RIFF');
    view.setUint32(4, 36 + length * numCh * 2, true);
    writeString(8, 'WAVE');
    writeString(12, 'fmt ');
    view.setUint32(16, 16, true);
    view.setUint16(20, 1, true);
    view.setUint16(22, numCh, true);
    view.setUint32(24, sampleRate, true);
    view.setUint32(28, sampleRate * numCh * 2, true);
    view.setUint16(32, numCh * 2, true);
    view.setUint16(34, 16, true);
    writeString(36, 'data');
    view.setUint32(40, length * numCh * 2, true);

    var channels = [];
    for (var ch = 0; ch < numCh; ch++) channels.push(babbleBuffer.getChannelData(ch));

    var offset = 44;
    for (var i = 0; i < length; i++) {
      for (var ch = 0; ch < numCh; ch++) {
        var sample = Math.max(-1, Math.min(1, channels[ch][i]));
        view.setInt16(offset, sample < 0 ? sample * 0x8000 : sample * 0x7FFF, true);
        offset += 2;
      }
    }

    var blob = new Blob([buffer], { type: 'audio/wav' });
    var url = URL.createObjectURL(blob);
    var a = document.createElement('a');
    a.href = url;
    a.download = 'babble-tape.wav';
    a.click();
    URL.revokeObjectURL(url);
  });
})();
</script>
